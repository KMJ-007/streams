<!DOCTYPE html>
<html lang="en"><head><title>Promises in js</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Promises in js"/><meta property="og:description" content="what are Promise in Javascript ? They are similar to real life promise, how we make promise to someone that i am making promise that i will come meet you, same way we are just telling that, this piece code will get executed in future."/><meta property="og:image" content="https://kmj-007.github.io/streams/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="what are Promise in Javascript ? They are similar to real life promise, how we make promise to someone that i am making promise that i will come meet you, same way we are just telling that, this piece code will get executed in future."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="thoughts/Promises-in-js"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href="..">Karan's Streams</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;images&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;thoughts&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;thoughts/fastai&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;thoughts/Tezi&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="images"><button class="folder-button"><span class="folder-title">images</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="images"><li><a href="../images/headless-commerce" data-for="images/headless-commerce">headless commerce</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="thoughts"><button class="folder-button"><span class="folder-title">Thoughts</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="thoughts"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="thoughts/fastai"><button class="folder-button"><span class="folder-title">fastai</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="thoughts/fastai"><li><a href="../thoughts/fastai/lesson-1" data-for="thoughts/fastai/lesson-1">lesson 1</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="thoughts/Tezi"><button class="folder-button"><span class="folder-title">Tezi</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="thoughts/Tezi"><li><a href="../thoughts/Tezi/GTM" data-for="thoughts/Tezi/GTM">GTM</a></li></ul></div></li><li><a href="../thoughts/Advanced-Deepweb-crawler" data-for="thoughts/Advanced-Deepweb-crawler">Advanced Deepweb crawler</a></li><li><a href="../thoughts/Anti-Signals" data-for="thoughts/Anti-Signals">Anti Signals</a></li><li><a href="../thoughts/Automating-Call-Center" data-for="thoughts/Automating-Call-Center">Automating Call Center</a></li><li><a href="../thoughts/bare-metal" data-for="thoughts/bare-metal">bare-metal</a></li><li><a href="../thoughts/concurrency" data-for="thoughts/concurrency">concurrency</a></li><li><a href="../thoughts/Database-schema-and-architecture-mistakes-and-learnings" data-for="thoughts/Database-schema-and-architecture-mistakes-and-learnings">Database schema and architecture mistakes and learnings</a></li><li><a href="../thoughts/encryption" data-for="thoughts/encryption">encryption</a></li><li><a href="../thoughts/English-speaking-coach" data-for="thoughts/English-speaking-coach">English speaking coach</a></li><li><a href="../thoughts/failure-resume" data-for="thoughts/failure-resume">failure-resume</a></li><li><a href="../thoughts/good-engineers" data-for="thoughts/good-engineers">good engineers</a></li><li><a href="../thoughts/how-vite-works-" data-for="thoughts/how-vite-works-">how vite works ?</a></li><li><a href="../thoughts/hypervisor" data-for="thoughts/hypervisor">hypervisor</a></li><li><a href="../thoughts/java-chip8-emulator" data-for="thoughts/java-chip8-emulator">java chip8 emulator</a></li><li><a href="../thoughts/javascript-rants" data-for="thoughts/javascript-rants">javascript-rants</a></li><li><a href="../thoughts/jit" data-for="thoughts/jit">jit</a></li><li><a href="../thoughts/Minecraft-redstone-llm-budy" data-for="thoughts/Minecraft-redstone-llm-budy">Minecraft redstone llm budy</a></li><li><a href="../thoughts/Nodejs-observability" data-for="thoughts/Nodejs-observability">Nodejs observability</a></li><li><a href="../thoughts/programming-books" data-for="thoughts/programming-books">programming books</a></li><li><a href="../thoughts/Promises-in-js" data-for="thoughts/Promises-in-js">Promises in js</a></li><li><a href="../thoughts/Qdrant-GSoC-2024-Proposal" data-for="thoughts/Qdrant-GSoC-2024-Proposal">Qdrant GSoC 2024 Proposal</a></li><li><a href="../thoughts/qdrant-gsoc" data-for="thoughts/qdrant-gsoc">qdrant-gsoc</a></li><li><a href="../thoughts/quotes" data-for="thoughts/quotes">Quotes</a></li><li><a href="../thoughts/self-help-books-are-mirage" data-for="thoughts/self-help-books-are-mirage">self help books are mirage</a></li><li><a href="../thoughts/sentry-error-and-LLm-based-github-PR" data-for="thoughts/sentry-error-and-LLm-based-github-PR">sentry error and LLm based github PR</a></li><li><a href="../thoughts/serverless" data-for="thoughts/serverless">serverlesss</a></li><li><a href="../thoughts/Short-form-Ai-story-teller" data-for="thoughts/Short-form-Ai-story-teller">Short form Ai story teller</a></li><li><a href="../thoughts/so-you-know-yarvin-right" data-for="thoughts/so-you-know-yarvin-right">so you know yarvin right?</a></li><li><a href="../thoughts/space-rag-app" data-for="thoughts/space-rag-app">space-rag-app</a></li><li><a href="../thoughts/to-read-book" data-for="thoughts/to-read-book">to read book</a></li><li><a href="../thoughts/toc" data-for="thoughts/toc">toc</a></li><li><a href="../thoughts/Understanding-authentication-from-first-principle" data-for="thoughts/Understanding-authentication-from-first-principle">Understanding authentication from first principle</a></li><li><a href="../thoughts/Vibe-board" data-for="thoughts/Vibe-board">vibe board</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../thoughts/">Thoughts</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Promises in js</a></div></nav><h1 class="article-title">Promises in js</h1><p class="content-meta">Apr 23, 2024, 8 min read</p><ul class="tags"><li><a href="../tags/seed" class="internal tag-link">#seed</a></li></ul></div></div><article class="popover-hint"><p>what are Promise in Javascript ?</p>
<p>They are similar to real life promise, how we make promise to someone that i am making promise that i will come meet you, same way we are just telling that, this piece code will get executed in future.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// executor (the producing code, &quot;singer&quot;) </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p>Promise object in javascript have two main part, “producing code” and “consuming code”,  producing code’s job is to produce the code, and consuming code’s job is tot consume the results from the produced code.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> myPromise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">myResolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">myReject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {  </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// &quot;Producing Code&quot; (May take some time)  </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  </span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">  myResolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// when successful  </span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">  myReject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">();  </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// when error  </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});  </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// &quot;Consuming Code&quot; (Must wait for a fulfilled Promise)  </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">myPromise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(  </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">value</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">/* code if successful */</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> },  </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">/* code if some error */</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> }  </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span></code></pre></figure>
<p>function passed to new Promise is called executor, which will execute them and then will make results for consuming code to consume the result.</p>
<p>so in short, executor runs automatically and attempts to do the job, when it finished with the task, it calls resolve if it was successful or reject if there was an error.</p>
<p>Promise Object have this these two internal properties:
<img src="../images/promise-js.png" width="auto" height="auto" alt/></p>
<p>resolve example:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// the function is executed automatically when the promise is constructed</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// after 1 second signal that the job is done with the result &quot;done&quot;</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;done&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p>state: “fulfilled”,
result: “done”</p>
<p>reject example:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// after 1 second signal that the job is finished with an error </span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">  reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Whoops!&quot;``</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">``</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">); </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p>state: “rejected”,
result: “error”</p>
<h3 id="there-can-be-only-single-result-or-an-error">there can be only single result or an error<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#there-can-be-only-single-result-or-an-error" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">  resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;done&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">  reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;...&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// ignored</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">  setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;...&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// ignored</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p>Consumer code:</p>
<p>.then part, when promises is either resolved or rejected, to get both values we use .then method on the promise object to get our result or error</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;done!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// resolve runs the first function in .then</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result), </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// shows &quot;done!&quot; after 1 second</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">error</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(error) </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// doesn't run</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span></code></pre></figure>
<p>error example:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Whoops!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// reject runs the second function in .then</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result), </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// doesn't run</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">error</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(error) </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// shows &quot;Error: Whoops!&quot; after 1 second</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span></code></pre></figure>
<p>just like normal try catch block, we have same with promises also we have try to get desired result, catch to catch the error, and finally block to execute final code when every thing is done!</p>
<p>catch:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Whoops!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// .catch(f) is the same as promise.then(null, f)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">catch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(alert); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// shows &quot;Error: Whoops!&quot; after 1 second</span></span></code></pre></figure>
<p>finally block don’t care about the result of promise, whether it was fulfilled or un fulfilled, it only knows to execute the code it is provided, and order matters in finally, if we write finally before the catch or then, it will run first,</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">throw</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;error&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">})</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">finally</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Promise ready&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)) </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// triggers first</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">catch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">err</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(err)); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// &lt;-- .catch shows the error</span></span></code></pre></figure>
<p>what will be result ?</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">	resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Good Morning!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">	setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Good Night!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(alert);</span></span></code></pre></figure>
<h1 id="difference-between-callback-and-promise-">difference between callback and promise ?<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#difference-between-callback-and-promise-" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>callback can be only called once, there is result or some kind of trigger, promises can be called as many times you want even after promise is fulfilled to access the result as many times you want</p>
<h3 id="chaining-in-promises">chaining in promises:<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#chaining-in-promises" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>we can chain promises, example:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// (*)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// (**)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// (***)  </span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 2</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 4</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p><img src="../images/promise-chaining.png" width="auto" height="auto" alt/>
adding many then don’t means chaining, they don’t forward the result to the next thing, they act as independent promise</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">*</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p>Promise Apis:</p>
<p>There are 6 static methods of <code>Promise</code> class:</p>
<p><code>Promise.all</code>:
we want to execute many promise in parallel and want to wait until all of them are resolved</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">all</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">([</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">2</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">2000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 2</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)) </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 3</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(alert);</span></span></code></pre></figure>
<p>the order of results will be same as the order of promise, even if the promise got rejected</p>
<p><code>A popular trick</code> is to map the array of job and pass them into promise all</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> urls </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'https://api.github.com/users/kmj-007'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'https://api.github.com/users/remy'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'https://api.github.com/users/jeresig'</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">];</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// map every url to the promise of the fetch</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> requests </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> urls.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">url</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> fetch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(url));</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Promise.all waits until all jobs are resolved</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">all</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(requests)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">responses</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> responses.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">forEach</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span></span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">response</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">`${</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">response</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">.</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">url</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">}: ${</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">response</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">.</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">status</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">}`</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">));</span></span></code></pre></figure>
<p>important thing to keep in mind about promise.all</p>
<blockquote>
<p><strong>If any of the promises is rejected, the promise returned by <code>Promise.all</code> immediately rejects with that error.</strong></p>
</blockquote>
<p>example of error:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">all</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">([</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)),</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Whoops!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">2000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)),</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">catch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(alert); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Error: Whoops!</span></span></code></pre></figure>
<p>also promise.all not cancel and does nothing about existing ongoing request, even if promise already got rejected, it will simply no longer watch them or care them, promise got rejected then it’s over, promise.all no longer cares about any thing.</p>
<p>in short,</p>
<blockquote>
<p>Promise.all = all or nothing</p>
</blockquote>
<p><code>Promise.allSettled</code>:
this one is recently added, old browsers don’t support, they need polyfills and transpilors</p>
<p><code>Promise.allSettled</code> just waits for all promises to settle, regardless of the result.</p>
<ul>
<li><code>{status:&quot;fulfilled&quot;, value:result}</code> for successful responses,</li>
<li><code>{status:&quot;rejected&quot;, reason:error}</code> for errors.</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> urls </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'https://api.github.com/users/iliakan'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'https://api.github.com/users/remy'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'https://no-such-url'</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">];</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  </span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">allSettled</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(urls.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">url</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> fetch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(url)))</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">results</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">//</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">[</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'fulfilled'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    value: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">/* response data */</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  },</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'fulfilled'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    value: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">/* response data */</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  },</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'rejected'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    reason: </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">/* error object */</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">//</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span></code></pre></figure>
<p>polyfill implementation for incompatible browsers:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.allSettled) {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  const</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> rejectHandler</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;"> reason</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> ({ status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'rejected'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, reason });</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  const</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolveHandler</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;"> value</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> ({ status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'fulfilled'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, value });</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">  Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">allSettled</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promises</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> convertedPromises</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promises.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">map</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">p</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(p).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(resolveHandler, rejectHandler));</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">all</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(convertedPromises);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  };</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span></code></pre></figure>
<p><code>Promise.race</code>:
it’s like fastest finger first, whichever gets resolved first wins</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">race</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">([</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)),</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Whoops!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">2000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)),</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(alert); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span></code></pre></figure>
<p><code>promise.any</code>:
promise any just does what it tells, if any of the promise gets fulfilled, then it returns the result, then ignores the others, if all get rejected, then it combines the error(AggregateError) and returns it</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">any</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">([</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;Whoops!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)),</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">1</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">2000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)),</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> setTimeout</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">), </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3000</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">))</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">]).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(alert); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// 1</span></span></code></pre></figure>
<p><code>Promise.resolve/reject</code>:
they are not used that much, because of async/await</p>
<ol>
<li><code>Promise.resolve(value)</code> – makes a resolved promise with the given value.</li>
<li><code>Promise.reject(error)</code> – makes a rejected promise with the given error.</li>
</ol>
<p>Promise handlers <code>.then</code>/<code>.catch</code>/<code>.finally</code> are always asynchronous.</p>
<p>what does that mean:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  </span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">//even if the promise resolved first or immediately</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;promise done!&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">));</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">alert</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;code finished&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// this alert shows first</span></span></code></pre></figure>
<p>put it more simply, when a promise is ready, its <code>.then/catch/finally</code> handlers are put into the queue; they are not executed yet. When the JavaScript engine becomes free from the current code, it takes a task from the queue and executes it.</p>
<p>That’s why “code finished” in the example above shows first.</p>
<p><img src="../images/promise-event-loop-1.png" width="auto" height="auto" alt/></p>
<p>internal implementation if you are interested of apis of promise:</p>
<p><code>Promise.race</code>:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> race</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promises</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">  // Return a new promise</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  return</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    promises.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">forEach</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promise</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">      // Wait for any promise to settle (resolve or reject)</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">      //adding .then to all the promisese to which we are iterating</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">      promise.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">      function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">result</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result)},</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">      function</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) { </span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(error) }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">      );</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line> </span></code></pre></figure>
<p><code>Promise.all</code>:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> all</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promises</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  return</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> result</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [];</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (promises.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> ===</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">      resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result);</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">      return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    }</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> countPending </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promises.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    promises.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">forEach</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">index</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">      Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(promise).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">value</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        result[index] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> value;</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        countPending</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">--</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (countPending </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">===</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result); </span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">      },</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">      function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">error</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">){</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">        reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(error);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">      });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    });</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span></code></pre></figure>
<p><code>Promise.allSettled</code>:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> allSettled</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promises</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (promises.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> ===</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">([]); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Resolve immediately if input array is empty</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  }</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  return</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [];</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> settledCount </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">; </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Initialize the settled count</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    promises.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">forEach</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">idx</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">      Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(promise).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span></span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">        value</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">          result[idx] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> { status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'fulfilled'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, value };</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        },</span></span>
<span data-line><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">        reason</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">          result[idx] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> { status: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">'rejected'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, reason };</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">      ).</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">finally</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        settledCount</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">++</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">; </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// Increment the settled count in finally rather than doing it twice in value or reason function blocks</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">        // Check if all promises have settled</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">        if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (settledCount </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">===</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promises.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">          resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(result);</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">        }</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">      });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">  });</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line> </span></code></pre></figure>
<p><code>Promise.any</code>:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> any</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promises</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) {</span></span>
<span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"> // your code here</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">promises.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">throw</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> AggregateError</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;No Promise passed&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> return</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> Promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">   let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> settledCount </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">let</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> errors </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> [];</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">   promises.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">forEach</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">promise</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">index</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promise</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">     .</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">data</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> resolve</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(data))</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">     .</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">catch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">err</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> {</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">       errors[index] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> err;</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">       settledCount</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">++</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">       if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (settledCount </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">===</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> promises.</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">reject</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> AggregateError</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span></span>
<span data-line><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">         'No Promise in Promise.any was resolved'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">         errors</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">       ))</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">     })</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">   )</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> })</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span data-line> </span></code></pre></figure>
<p>That’s it for now, will add more things when i learn more!</p></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.2.2</a> © 2024</p><ul><li><a href="https://github.com/kmj-007">GitHub</a></li><li><a href="https://twiiter.com/KaranJanthe">Twitter</a></li></ul></footer></div></body><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script type="module">
          let mermaidImport = undefined
          document.addEventListener('nav', async () => {
            if (document.querySelector("code.mermaid")) {
              mermaidImport ||= await import('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs')
              const mermaid = mermaidImport.default
              const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
              mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                theme: darkMode ? 'dark' : 'default'
              })

              await mermaid.run({
                querySelector: '.mermaid'
              })
            }
          });
          </script><script type="application/javascript">
        const socket = new WebSocket('ws://localhost:3001')
        socket.addEventListener('message', () => document.location.reload())
      </script><script src="../postscript.js" type="module"></script></html>